CKEDITOR.dialog.add("cssanimMainDialog",function(f){function n(a,d){var c;c='\x3cform\x3e\x3cdiv style\x3d" overflow: auto; height: 350px; padding-bottom: 10px; margin-bottom: 10px;"\x3e';c+="\x3ctable\x3e";var e,f;for(e=0;e<d.length;e+=1)c+="\x3ctr\x3e",c+='\x3ctd style\x3d"width:280px;"\x3e',c+=d[e].toUpperCase(),c+="\x3c/td\x3e",c+='\x3ctd style\x3d"text-align:center; width:80px;"\x3e',f="",0<=a.indexOf(d[e])&&(f="checked\x3dchecked"),c+=' \x3cinput type\x3d"checkbox" name\x3d"tags" '+f+' value\x3d"'+
d[e]+'"\x3e',c+="\x3c/td\x3e",c+="\x3c/tr\x3e";return c+="\x3c/table\x3e",c+="\x3c/div\x3e",c+"\x3c/form\x3e"}function u(){var a="",d=f.config.highlightBGColor;if(0<=f.config.highlightBGColor.indexOf("rgb")&&(d=f.config.highlightBGColor,"#"!==d.substr(0,1)))var c=/(.*?)rgb\((\d+),\s*(\d+),\s*(\d+)\)/i.exec(d),d=parseInt(c[2],10).toString(16),e=parseInt(c[3],10).toString(16),c=parseInt(c[4],10).toString(16),d="#"+((1===d.length?"0"+d:d)+(1===e.length?"0"+e:e)+(1===c.length?"0"+c:c));e=f.config.customCssFilePath;
return a+="\x3cform\x3e",a+='\x3cfieldset style\x3d"border-radius:10px"\x3e',a+='\x3clegend style\x3d"font-weight:bold;"\x3e'+h.HBS+"\x3c/legend\x3e",a+='\x3ctable style\x3d"width:300px;"\x3e',a+="\x3ctr\x3e",a+='\x3ctd style\x3d"width:250px;"\x3e',a+=h.HBGC,a+="\x3c/td\x3e",a+="\x3ctd\x3e",a+='\x3cinput style\x3d"width:50px; height:25px; " type\x3d"color" name\x3d"HLBgColor" value\x3d"'+d+'"  onchange\x3d"CKEDITOR.plugins.cssanim.setHighLightBgColor(this.value)"\x3e',a+="\x3c/td\x3e",a+="\x3c/tr\x3e",
a+="\x3ctr\x3e",a+="\x3ctd\x3e",a+=h.HBW,a+="\x3c/td\x3e",a+='\x3ctd style\x3d"padding:2px;"\x3e',a+='\x3cinput style\x3d"width:40px; border: 1px solid #ccc;" name\x3d"width" type\x3d"number" min\x3d"1" max\x3d"10"  onchange\x3d"CKEDITOR.plugins.cssanim.setHighLightBorder(this.value)"  value\x3d"'+parseInt(f.config.highlightBorder)+'"\x3e px',a+="\x3c/td\x3e",a+="\x3c/tr\x3e",a+="\x3c/table\x3e",a+="\x3c/fieldset\x3e",a+="\x3cbr\x3e",a+='\x3cfieldset style\x3d"border-radius:10px"\x3e',a+='\x3clegend style\x3d"font-weight:bold;"\x3e'+
h.CustomCSS+"\x3c/legend\x3e",a+='\x3ctable style\x3d"width:300px;"\x3e',a+="\x3ctr\x3e",a+='\x3ctd style\x3d"width:50px;"\x3e',a+=h.cssPath+"\x26nbsp;",a+="\x3c/td\x3e",a+='\x3ctd style\x3d"width:250px;"\x3e',a+='\x3cinput type\x3d"text" style\x3d"width:400px; border: 1px solid #ccc;" name\x3d"cssName" value\x3d'+e+"\x3e",a+="\x3c/td\x3e",a+="\x3c/tr\x3e",a+="\x3ctr\x3e",a+='\x3ctd colspan\x3d"2" style\x3d"text-align:center; padding-top: 8px;color: tomato;"\x3e',a+=h.cssInfo,a+="\x3c/td\x3e",a+=
"\x3c/tr\x3e",a+="\x3c/table\x3e",a+="\x3c/fieldset\x3e",a+='\x3cdiv id\x3d"cssResultsDiv" style\x3d"margin-top:10px; padding:5px; text-align: center; border: #ccc solid 1px; display:none;"\x3e',a+="test",a+="\x3c/div\x3e",a+"\x3c/form\x3e"}function v(a){var d,c,e,q=h.irrelevant,b=a.getContentElement("tab-parameters-box","parametersSettings").getElement().getElementsByTag("input");for(e=0;e<b.count();e+=1)if(c=b.getItem(e).getNameAtt(),"HLBgColor"===c){d=b.getItem(e).getValue();break}var k;c=CKEDITOR.plugins.cssanim.getAllAnimElem(f);
e=h.noElements;var b='\x3cdiv style\x3d"width: 90%; height: 1px; background: grey; margin-left: auto;margin-right: auto;"\x3e\x3c/div\x3e\x3cp style\x3d"text-align: center; padding: 5px; color: grey; font-weight:bold;"\x3e',b=b+('\x3cspan style\x3d"color: LightSkyBlue; font-weight:bold;"\x3e'+h.animFromDef+"\x3c/span\x3e"),b=b+('\x3cbr\x3e\x3cspan style\x3d"color: cornflowerblue; font-weight:bold;"\x3e'+h.animPause+"\x3c/span\x3e"),b=b+('\x3cbr\x3e\x3cspan style\x3d"color: PaleGreen; font-weight:bold;"\x3e'+
h.animFromCustom+"\x3c/span\x3e"),b=b+('\x3cbr\x3e\x3cspan style\x3d"color: orange; font-weight:bold;"\x3e'+h.animBoth+"\x3c/span\x3e"),b=b+('\x3cbr\x3e\x3cspan style\x3d"color: Red; font-weight:bold;"\x3e'+h.animUndef+"\x3c/span\x3e"),b=b+"\x3cbr\x3e",b=b+"\x3c/p\x3e",b=b+'\x3cdiv style\x3d"width: 90%; height: 1px; background: grey; margin-left: auto;margin-right: auto;"\x3e\x3c/div\x3e',b=b+'\x3cp style\x3d"text-align: center; padding: 5px; color: grey; font-weight:bold;"\x3e',b=b+h.dblClick,b=
b+"\x3c/p\x3e",b=b+'\x3cdiv style\x3d"width: 90%; height: 1px; background: grey; margin-left: auto;margin-right: auto;margin-bottom: 10px;"\x3e\x3c/div\x3e',b=b+'\x3cdiv style\x3d" width: 600px; overflow: auto; height: 400px;"\x3e',b=b+"\x3ctable\x3e",b=b+"\x3ctr\x3e",b=b+'\x3cth style\x3d"border: 1px solid gray; text-align:center; padding:5px; font-weight:bold; background-color: lightgray;"\x3eTag\x3c/th\x3e',b=b+'\x3cth style\x3d"border: 1px solid gray; text-align:center; padding:5px; font-weight:bold; background-color: lightgray;"\x3eId\x3c/th\x3e',
b=b+'\x3cth style\x3d"border: 1px solid gray; text-align:center; padding:5px; font-weight:bold; background-color: lightgray;"\x3eOnLoad\x3c/th\x3e',b=b+'\x3cth style\x3d"border: 1px solid gray; text-align:center; padding:5px; font-weight:bold; background-color: lightgray;"\x3eOnClick\x3c/th\x3e',b=b+'\x3cth style\x3d"border: 1px solid gray; text-align:center; padding:5px; font-weight:bold; background-color: lightgray;"\x3eOnOver\x3c/th\x3e',b=b+('\x3cth style\x3d"border: 1px solid gray; text-align:center; padding:5px; font-weight:bold; background-color: lightgray;"\x3e'+
h.ral+"\x3c/th\x3e"),b=b+"\x3c/tr\x3e",n,m,g,l,r,t=0,p="azure;";for(r in c)c.hasOwnProperty(r)&&(l=c[r],q=h.irrelevant,k='"\x3e',t+=1,p="azure",n=l.elem.nodeName.toLowerCase(),0>f.config.allowedTags.indexOf(n)&&(p="MistyRose"),b+='\x3ctr style\x3d"background-color:'+p+';" ',b+=" onmouseover\x3d\"this.style.backgroundColor\x3d'"+d+"'; CKEDITOR.plugins.cssanim.runHighLightElemById('"+l.elem.id+"'); \"",b+=" onmouseout\x3d\"this.style.backgroundColor\x3d'"+p+"'; CKEDITOR.plugins.cssanim.cleanHighlight();\"",
b+=" ondblclick\x3d\" CKEDITOR.plugins.cssanim.runAddAnimDialogById('"+l.elem.id+"')\"",b+=" \x3e",b+='\x3ctd style\x3d"border: 1px solid gray; text-align:center; padding:5px;'+k,b+=l.elem.nodeName,b+="\x3c/td\x3e",b+='\x3ctd style\x3d"border: 1px solid gray; text-align:center; padding:5px;'+k,b+=l.elem.id,b+="\x3c/td\x3e",k='"\x3e',l.cds?(m=l.cds.replace("{animation:","").replace("}","").replace(";","").trim(),g=parseCSS3AnimationShorthand(m),q=l.ral?"YES":"NO",g.name&&(k="cssAnimPause"===g.name?
' background-color:cornflowerblue;"\x3e':a.availableAnimsObj&&a.availableAnimsObj.allAvailableAnimsConflict&&0<=a.availableAnimsObj.allAvailableAnimsConflict.indexOf(g.name)?' background-color:orange;"\x3e':a.availableAnimsObj&&a.availableAnimsObj.allAvailableAnimsCustom&&0<=a.availableAnimsObj.allAvailableAnimsCustom.indexOf(g.name)?' background-color:PaleGreen;"\x3e':a.availableAnimsObj&&a.availableAnimsObj.allAvailableAnimsCssAnim&&0<=a.availableAnimsObj.allAvailableAnimsCssAnim.indexOf(g.name)?
' background-color:LightSkyBlue;"\x3e':' background-color:Red;"\x3e'),b+='\x3ctd style\x3d"border: 1px solid gray; text-align:center; padding:5px;'+k):(g={},g.name="",b+='\x3ctd style\x3d"border: 1px solid gray; text-align:center; padding:5px;'+k),b+=g.name,b+="\x3c/td\x3e",k='"\x3e',l.cdc?(0<=l.cdc.indexOf("animation-play-state")?g={name:"cssAnimPause",duration:null,timingFunction:"linear",delay:0,iterationCount:1,direction:"normal"}:(m=l.cdc.replace("{animation:","").replace("}","").replace(";",
"").trim(),g=parseCSS3AnimationShorthand(m)),g.name&&(k="cssAnimPause"===g.name?' background-color:cornflowerblue;"\x3e':a.availableAnimsObj&&a.availableAnimsObj.allAvailableAnimsConflict&&0<=a.availableAnimsObj.allAvailableAnimsConflict.indexOf(g.name)?' background-color:orange;"\x3e':a.availableAnimsObj&&a.availableAnimsObj.allAvailableAnimsCustom&&0<=a.availableAnimsObj.allAvailableAnimsCustom.indexOf(g.name)?' background-color:PaleGreen;"\x3e':a.availableAnimsObj&&a.availableAnimsObj.allAvailableAnimsCssAnim&&
0<=a.availableAnimsObj.allAvailableAnimsCssAnim.indexOf(g.name)?' background-color:LightSkyBlue;"\x3e':' background-color:Red;"\x3e'),b+='\x3ctd style\x3d"border: 1px solid gray; text-align:center; padding:5px;'+k):(g={},g.name="",b+='\x3ctd style\x3d"border: 1px solid gray; text-align:center; padding:5px;'+k),b+=g.name,b+="\x3c/td\x3e",k='"\x3e',l.cdo?(0<=l.cdo.indexOf("animation-play-state")?g={name:"cssAnimPause",duration:null,timingFunction:"linear",delay:0,iterationCount:1,direction:"normal"}:
(m=l.cdo.replace("{animation:","").replace("}","").replace(";","").trim(),g=parseCSS3AnimationShorthand(m)),g.name&&(k="cssAnimPause"===g.name?' background-color:cornflowerblue;"\x3e':a.availableAnimsObj&&a.availableAnimsObj.allAvailableAnimsConflict&&0<=a.availableAnimsObj.allAvailableAnimsConflict.indexOf(g.name)?' background-color:orange;"\x3e':a.availableAnimsObj&&a.availableAnimsObj.allAvailableAnimsCustom&&0<=a.availableAnimsObj.allAvailableAnimsCustom.indexOf(g.name)?' background-color:PaleGreen;"\x3e':
a.availableAnimsObj&&a.availableAnimsObj.allAvailableAnimsCssAnim&&0<=a.availableAnimsObj.allAvailableAnimsCssAnim.indexOf(g.name)?' background-color:LightSkyBlue;"\x3e':' background-color:Red;"\x3e'),b+='\x3ctd style\x3d"border: 1px solid gray; text-align:center; padding:5px;'+k):(g={},g.name="",b+='\x3ctd style\x3d"border: 1px solid gray; text-align:center; padding:5px;'+k),b+=g.name,b+="\x3c/td\x3e",k='"\x3e',b+='\x3ctd style\x3d"border: 1px solid gray; text-align:center; padding:5px;'+k,b+=q,
b+="\x3c/td\x3e",b+="\x3c/tr\x3e");return 0<t&&(b+="\x3c/table\x3e",b+="\x3c/div\x3e",b+='\x3cdiv style\x3d"height: 6px;"\x3e\x3c/div\x3e',e=b),e}var h=f.lang.cssanim;return{title:f.lang.cssanim.genProperties,minWidth:550,width:550,minHeight:250,height:250,resizable:CKEDITOR.DIALOG_RESIZE_NONE,contents:[{id:"tab-doc-animations",label:h.docAnim,elements:[{type:"html",id:"allAnimations",html:""}]},{id:"tab-allowed-tags",label:h.allowedTags,elements:[{type:"html",id:"allowedTags",allowedTags:null,html:"",
setup:function(){this.allowedTags=f.config.allowedTags},cancel:function(){f.config.allowedTags=this.allowedTags;var a,d=this.getElement().getElementsByTag("input");for(a=0;a<d.count();a+=1)d.getItem(a).$.checked=0>f.config.allowedTags.indexOf(d.getItem(a).$.value)?!1:!0},commit:function(){var a,d=this.getElement().getElementsByTag("input");f.config.allowedTags=[];for(a=0;a<d.count();a+=1)d.getItem(a).$.checked&&f.config.allowedTags.push(d.getItem(a).$.value)}}]},{id:"tab-parameters-box",label:h.advSettings,
elements:[{type:"html",id:"parametersSettings",html:"",bg:"",bw:0,pad:0,setup:function(){var a,d,c=this.getElement().getElementsByTag("input");for(d=0;d<c.count();d+=1)a=c.getItem(d).$.name,"HLBgColor"===a?this.bg=c.getItem(d).$.value:"width"===a&&(this.bw=c.getItem(d).$.value)},commit:function(){var a,d,c=this.getElement().getElementsByTag("input");for(d=0;d<c.count();d+=1)a=c.getItem(d).$.name,"HLBgColor"===a?f.config.highlightBGColor=c.getItem(d).$.value:"width"===a?f.config.highlightBorder=c.getItem(d).$.value+
"px":"cssName"===a&&this.getDialog().initialCssFile!==c.getItem(d).$.value&&CKEDITOR.plugins.cssanim.getCustomCss(c.getItem(d).$.value)},cancel:function(){var a,d,c=this.getElement().getElementsByTag("input");for(d=0;d<c.count();d+=1)a=c.getItem(d).$.name,"HLBgColor"===a?(c.getItem(d).$.value=this.bg,f.config.highlightBGColor=this.bg):"width"===a&&(c.getItem(d).$.value=this.bw,f.config.highlightBorder=this.bw+"px")}}]}],onLoad:function(){CKEDITOR.plugins.cssanim.setCssAnimDialog(this);this.initialCssFile=
"";var a;a=this.getContentElement("tab-doc-animations","allAnimations").domId;a=document.getElementById(a);a.innerHTML=v(this);a=this.getContentElement("tab-allowed-tags","allowedTags").domId;a=document.getElementById(a);a.innerHTML=n(f.config.allowedTags,f.config.onLoadAllowedTags);a=this.getContentElement("tab-parameters-box","parametersSettings").domId;a=document.getElementById(a);a.innerHTML=u();this.on("selectPage",function(a){var c,e,h;"tab-allowed-tags"===a.data.currentPage&&(c=a.sender.getContentElement("tab-allowed-tags",
"allowedTags"),c.commit());"tab-doc-animations"===a.data.page?(c=a.sender.getContentElement("tab-doc-animations","allAnimations").domId,e=document.getElementById(c),e.innerHTML=v(this)):"tab-allowed-tags"===a.data.page?(c=a.sender.getContentElement("tab-allowed-tags","allowedTags").domId,e=document.getElementById(c),e.innerHTML=n(f.config.allowedTags,f.config.onLoadAllowedTags)):"tab-parameters-box"===a.data.page&&(h=a.sender.getContentElement("tab-parameters-box","parametersSettings"),c=h.domId,
e=document.getElementById(c),e.innerHTML=u())})},onShow:function(){this.setupContent();var a=this.getContentElement("tab-parameters-box","parametersSettings").domId,a=document.getElementById(a);f.config.customCssFilePath!==this.initialCssFile&&(CKEDITOR.plugins.cssanim.getCustomCss(a),this.initialCssFile=f.config.customCssFilePath);this.availableAnimsObj=CKEDITOR.plugins.cssanim.getAvailableAnims();this.hidePage("tab-doc-animations");this.showPage("tab-doc-animations");this.selectPage("tab-doc-animations");
CKEDITOR.plugins.cssanim.cleanHighlight()},onOk:function(){this.commitContent();CKEDITOR.plugins.cssanim.pendingChanges=[]},onCancel:function(){if(CKEDITOR.plugins.cssanim.managePending){var a,d;for(a=CKEDITOR.plugins.cssanim.pendingChanges.length-1;0<=a;--a)d=JSON.parse(CKEDITOR.plugins.cssanim.pendingChanges[a][1]),CKEDITOR.plugins.cssanim.restoreAnimOnElemById(CKEDITOR.plugins.cssanim.pendingChanges[a][0],d);CKEDITOR.plugins.cssanim.pendingChanges=[]}f.config.customCssFilePath!==this.initialCssFile&&
(a=this.getContentElement("tab-parameters-box","parametersSettings"),a=document.getElementById(a.domId),a.querySelector("#cssResultsDiv").parentElement.elements.cssName.value=this.initialCssFile.trim(),CKEDITOR.plugins.cssanim.getCustomCss(a));this.foreach(function(a){a.cancel&&a.cancel.apply(a)})}}});